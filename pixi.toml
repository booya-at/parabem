[project]
name = "parabem"
version = "0.1.0"
description = "Add a short description here"
authors = ["looooo <sppedflyer@gmail.com>"]
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64"]

[tasks]
configure = { cmd = ["cmake", "-G", "Ninja", "-B", "build", "-S", ".", "-D", "CMAKE_INSTALL_PREFIX:FILEPATH=$CONDA_PREFIX"]}
configure_release = { cmd = ["cmake", "-G", "Ninja", "-B", "build", "-S", ".", "-D", "CMAKE_INSTALL_PREFIX:FILEPATH=$CONDA_PREFIX", "-D", "CMAKE_BUILD_TYPE=Release"]}
build = {cmd = ["ninja", "-C", "build", "install"], depends-on = ["configure"]}
build_release = {cmd = ["ninja", "-C", "build", "install"], depends-on = ["configure_release"]}
crash = {cmd = ["python", "examples/openglider/crash.py"]}
shape = {cmd = ["python", "examples/openglider/shape_cl_cd.py"]}

[dependencies]
ninja = ">=1.12.1,<2"
cmake = ">=3.30.1,<4"
python = ">=3.12.4,<4"
pybind11 = ">=2.13.1,<3"
eigen = ">=3.4.0,<4"
openmpi = ">=5.0.3,<6"
numpy = ">=2.0.1,<3"
matplotlib-base = ">=3.9.1,<4"

# for openglider
svgwrite = "*"
scipy = "*"
ezdxf = "*"
ezodf = "*"
lxml = "*"
meshpy = "*"

[pypi-dependencies]
openglider = {path = "./../Openglider", editable = true}

[target.osx-arm64.dependencies]
llvm-openmp = "*"
clangxx = ">=16,<17"

[target.linux-64.dependencies]
openmpi = "*"
